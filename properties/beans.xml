<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
 
<beans>

  <bean name="siw"
    class="gov.nih.nci.ncicb.cadsr.loader.UMLLoaderGUI"
    >

    <property name="roundtripDescriptor">
      <ref bean="roundtripDescriptor"/>
    </property>
    
  </bean>

  <bean name="umlLoader"
    class="gov.nih.nci.ncicb.cadsr.loader.UMLLoader"
    >
    <property name="validator"><ref bean="mainValidator"/></property>
    <property name="parser"><ref bean="xmiParser"/></property>
    <property name="persister"><ref bean="mainPersister"/></property>
  </bean>
  
  <bean name="umlEventHandler"
    class="gov.nih.nci.ncicb.cadsr.loader.event.UMLDefaultHandler">
  </bean>

  <bean name="xmiParser"
    class="gov.nih.nci.ncicb.cadsr.loader.parser.XMIParser">
    <property name="eventHandler"><ref bean="umlEventHandler"/></property>
  </bean>

  <bean name="mainPersister"
    class="gov.nih.nci.ncicb.cadsr.loader.persister.UMLPersister">
  </bean>


  <!-- Services -->
  <bean name="csvWriter"
    class="gov.nih.nci.ncicb.cadsr.loader.parser.CSVWriter" 
    singleton="true">
  </bean>

  <bean name="xmiWriter"
    class="gov.nih.nci.ncicb.cadsr.loader.parser.XMIWriter" 
    singleton="true">
  </bean>

  <bean name="cadsrModule"
    class="gov.nih.nci.ncicb.cadsr.loader.ext.CadsrPublicApiModule" 
    singleton="true">
    <property name="serviceURL"> <value>http://cabio.nci.nih.gov/cacore30/server/HTTPServer</value></property>
  </bean>

  <bean name="umlRoundtrip"
    class="gov.nih.nci.ncicb.cadsr.loader.roundtrip.UMLRoundtrip" 
    singleton="true"
    >
    <property name="cadsrModule"><ref bean="cadsrModule"/></property>
  </bean>

  <bean name="roundtripAction"
    class="gov.nih.nci.ncicb.cadsr.loader.RoundtripAction" 
    singleton="true"
    >
    <property name="roundtrip"><ref bean="umlRoundtrip"/></property>
    <property name="parser"><ref bean="xmiParser"/></property>
  </bean>

  <!-- Validators -->
  <bean name="valueDomainValidator"
    class="gov.nih.nci.ncicb.cadsr.loader.validator.ValueDomainValidator">
    <property name="cadsrModule"><ref bean="cadsrModule"/></property>
  </bean>
  <bean name="conceptCodeValidator"
    class="gov.nih.nci.ncicb.cadsr.loader.validator.ConceptCodeValidator"/>
  <bean name="datatypeValidator"
    class="gov.nih.nci.ncicb.cadsr.loader.validator.DatatypeValidator"/>
  <bean name="descriptionValidator"
    class="gov.nih.nci.ncicb.cadsr.loader.validator.DescriptionValidator"/>

  <bean name="associationValidator"
    class="gov.nih.nci.ncicb.cadsr.loader.validator.AssociationValidator"/>


  <bean name="mainValidator"
    class="gov.nih.nci.ncicb.cadsr.loader.validator.UMLValidator">
    <property name="validators">
      <list>
        <ref bean="descriptionValidator"/>
        <ref bean="conceptCodeValidator"/>
        <ref bean="datatypeValidator"/>
        <ref bean="valueDomainValidator"/>
        <ref bean="associationValidator"/>
      </list>
    </property>

  </bean>
  
  


  <!-- Wizard Panels -->
  <bean name="roundtripPanel"
    class="gov.nih.nci.ncicb.cadsr.loader.ui.RoundtripPanel">
    <property name="cadsrModule">
      <ref bean="cadsrModule"/>
    </property>
  </bean>

  <!-- Wizard Descriptors -->
  <bean name="roundtripDescriptor"
    class="gov.nih.nci.ncicb.cadsr.loader.ui.RoundtripPanelDescriptor"
    autowire="constructor">
  </bean>

  
  <!-- UI Elements -->
  
  <!--  Cadsr Dialog -->
  <bean name="cadsrDEDialog"
    class="gov.nih.nci.ncicb.cadsr.loader.ui.CadsrDialog"
    >
    <constructor-arg><value>4</value></constructor-arg>
    <property name="cadsrModule">
      <ref bean="cadsrModule"/>
    </property>
  </bean>

  <bean name="cadsrVDDialog"
    class="gov.nih.nci.ncicb.cadsr.loader.ui.CadsrDialog"
    >
    <constructor-arg><value>3</value></constructor-arg>
    <property name="cadsrModule">
      <ref bean="cadsrModule"/>
    </property>
  </bean>


</beans>